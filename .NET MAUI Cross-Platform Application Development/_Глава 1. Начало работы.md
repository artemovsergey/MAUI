# Начало работы с .NET MAUI

С момента выпуска .NET 5 Microsoft пытается объединить различные реализации .NET в
один выпуск .NET. .NET Multi-platform App UI (или .NET MAUI) — это попытка предоставить унифицированный
кроссплатформенная структура пользовательского интерфейса. Мы научимся использовать .NET MAUI для разработки кроссплатформенных
приложения в этой книге.

В этой главе мы узнаем следующее:

• Обзор кроссплатформенных технологий

• Сравнение кроссплатформенных технологий (.NET, Java и JavaScript).

• Ландшафт .NET и история Xamarin

• Функции .NET MAUI

• Приложения .NET MAUI Blazor

• Настройка среды разработки

Если вы новичок в разработке .NET, эта глава поможет вам понять ландшафт .NET. Для
Разработчики Xamarin, многие темы в этой книге могут показаться вам знакомыми, и эта глава даст вам
обзор того, что мы будем обсуждать в этой книге.

# Обзор кроссплатформенных технологий

Прежде чем обсуждать кроссплатформенные технологии, давайте рассмотрим ландшафт разработки приложений.
во-первых, чтобы лучше понять различные кросс-платформенные технологии.
.NET MAUI — это кроссплатформенная среда разработки от Microsoft для создания приложений, ориентированных на
как мобильные, так и настольные форм-факторы на Android, iOS, macOS, Windows и Tizen.

Как правило, разработку программного обеспечения можно разделить на две категории: системное программирование и
прикладное программирование. Прикладное программирование направлено на создание программного обеспечения, которое предоставляет услуги
непосредственно пользователю, в то время как системное программирование направлено на создание программного обеспечения и программных платформ.
которые предоставляют услуги другому программному обеспечению. В домене .NET разработка платформы .NET
сама относится к системному программированию, тогда как разработка приложений поверх .NET
платформа относится к прикладному программированию.
Дизайн или архитектура современной системы включает в себя клиентскую и серверную часть программного обеспечения, которое
мы можем назвать интерфейс и бэкэнд.
Что касается программного обеспечения на стороне клиента, мы можем разделить его на две категории — собственные приложения.
и веб-приложений.

## Нативные приложения

При разработке нативных приложений мы обычно имеем в виду разработку приложений для конкретной операционной системы.
система. С настольными приложениями это могут быть приложения Windows, приложения macOS или Linux.
Приложения. С мобильными приложениями это может быть Android или iOS.
Когда мы разрабатываем нативное приложение, мы должны разрабатывать его для каждой платформы (Windows, Linux,
Android или macOS/iOS). Нам нужно использовать разные языки программирования, инструменты и библиотеки, чтобы
разработать каждую из них индивидуально

## Веб-приложения

За последние несколько лет разработка веб-приложений претерпела эволюцию нескольких поколений.
десятилетия, от браузера Netscape со статическими веб-страницами до современного одностраничного приложения (SPA)
с использованием фреймворков JavaScript (таких как React или Angular). В разработке веб-приложений JavaScript
и различные фреймворки на основе JavaScript доминируют на рынке. В экосистеме .NET Blazor является
пытается догнать в этой области.

## Бэкэнд-сервисы

Как нативные приложения, так и веб-приложения обычно нуждаются в некоторых серверных службах для доступа к бизнесу.
логика или база данных. Для серверной разработки можно использовать множество языков и фреймворков, таких как
Java/Spring, .NET, Node.js, Ruby on Rails или Python/Django. Обычно нативные приложения и веб-приложения
приложения могут совместно использовать одну и ту же серверную службу. Java и .NET являются наиболее популярным выбором для
разработка бэкэнд-сервиса.

# Кроссплатформенные технологии

Технологии, используемые при разработке веб-приложений и разработке серверных служб, не
зависят от платформы и могут использоваться на разных платформах как есть. Когда мы говорим о кроссплатформенности
мы обычно имеем в виду разработку нативных приложений. В разработке нативных приложений
технологии кросс-платформенной разработки могут помочь снизить затраты и повысить эффективность. Большинство
популярные технологии кроссплатформенной разработки в этой категории включают Flutter, .NET MAUI/
Xamarin и React Native. В таблице 1.1 представлен обзор доступных кроссплатформенных технологий.
и альтернативные решения от Microsoft. Перечисленные здесь технологии не являются исчерпывающими. я просто хочу
чтобы дать вам представление о том, какие технологии существуют в каждой категории и какое решение Microsoft
можно использовать как альтернативу.

![изображение](https://user-images.githubusercontent.com/26972859/231533858-3d8929c7-6534-44d9-9691-30920ed3a466.png)

Таблица 1.1: Сравнение языков и сред с решениями Microsoft

Не существует лучшего выбора кроссплатформенного инструмента или фреймворка. Окончательный выбор обычно делается
в соответствии с требованиями бизнеса. Однако из предыдущей таблицы видно, что .NET
Экосистема предоставляет полный спектр инструментов для ваших требований. Команда разработчиков для большого
system обычно требуются люди с опытом работы с разными языками программирования и фреймворками.
С .NET сложность языков программирования и сред может быть значительно упрощена.

## Сравнение .NET, Java и JavaScript

У нас был обзор инструментов и фреймворков, используемых в веб-приложениях, нативных приложениях и бэкэнд-сервисах.
разработка. Если мы посмотрим на более высокий уровень, то есть на уровень экосистемы .NET, экосистему Java или
JavaScript может почти соответствовать тому, что мы имеем в решении .NET. Решения Java, JavaScript или .NET могут
предоставлять инструменты или фреймворки почти на всех уровнях. Было бы интересно сравнить Java, JavaScript,
и .NET на более высоком уровне.
Java разработан как язык с целью написать один раз и работать где угодно. Он построен вокруг Java
язык программирования и виртуальная машина Java (JVM). JVM — это механизм, на котором можно работать.
поддерживаемые платформы, что помогает устранить зависимость от платформы для разработчиков. С помощью этой кроссплатформенной
возможности, Java становится распространенным выбором для разработки кросс-платформенных приложений и сервисов.
JavaScript — это язык, созданный для веб-браузеров, и его возможности обширны из-за требований
Веб-разработка. Ограничение JavaScript заключается в том, что это язык сценариев, поэтому ему не хватает языка
функции, которые можно найти в Java или C#. Однако это ограничение не ограничивает его использование и популярность.
Таблица 1.2 предлагает сравнение трех технологий:

![изображение](https://user-images.githubusercontent.com/26972859/231534265-50567661-7e0c-483f-b0b1-769733ff263f.png)

Таблица 1.2: Сравнение Java, JavaScript и .NET

Из таблицы 1.2 видно, что и .NET, и Java имеют хорошую инфраструктуру для поддержки нескольких
языки. JavaScript имеет свои ограничения как язык сценариев, поэтому TypeScript и CoffeeScript были
придуман для его усиления. TypeScript был разработан Microsoft для создания современных объектно-ориентированных
языковые функции в JavaScript. TypeScript скомпилирован в JavaScript для выполнения, поэтому он может работать
хорошо с существующими библиотеками JavaScript.
Java построена на JVM, а .NET — на Common Language Runtime (CLR) и
Система общего типа (CTS). Используя CTS и CLR в качестве ядра реализации .NET,
естественно поддерживает несколько языков с возможностью совместного использования библиотеки базовых классов (BCL) во всех
поддерживаемые языки.
Хотя существует несколько языков, использующих JVM в качестве уровня абстракции для кроссплатформенных возможностей,
взаимодействие между языками, производными от Java, не находится на том же уровне, что и языки .NET. Все
Языки .NET построены на одной архитектуре и используют один и тот же BCL, в то время как языки Java, такие как
Java, Kotlin или Scala разрабатываются отдельно для совершенно разных целей.

Это сравнение помогает нам выбрать или оценить технологический стек для кроссплатформенной разработки. Как
Разработчик .NET MAUI, этот анализ поможет вам лучше понять свой выбор. Чтобы понять, где
.NET MAUI находится в экосистеме .NET, давайте кратко рассмотрим историю .NET.
пейзаж в следующем разделе.

## Изучение ландшафта .NET

Прежде чем мы углубимся в детали .NET MAUI, давайте сделаем обзор ландшафта .NET. Этот
Раздел актуален, если вы новичок в .NET. Если вы разработчик .NET, вы можете пропустить этот раздел.
С тех пор, как Microsoft представила платформу .NET, она превратилась из проприетарной программной среды.
для Windows на кроссплатформенную платформу с открытым исходным кодом.

Есть много способов взглянуть на стек технологий .NET. В основном он содержит следующие компоненты:

* Общая инфраструктура (компилятор и набор инструментов)
* BCL
* Среда выполнения (Windows Runtime (WinRT) или Mono)

## .NET Framework

История истории .NET начинается с .NET Framework. Это проприетарная программная среда
разработанный Microsoft, который работает в основном на Microsoft Windows. .NET Framework начинался как ориентированная на будущее структура приложений для стандартизации стека программного обеспечения в экосистеме Windows.
Он построен на базе Common Language Infrastructure (CLI) и C#. Несмотря на то, что первичный
языком программирования является C #, он разработан как независимый от языка фреймворк. Поддерживаемые языки
могут совместно использовать одни и те же CTS и CLR. Большинство настольных приложений Windows разрабатываются с использованием .NET.
Framework и поставляется как часть операционной системы Windows.

## Мононуклеоз

Первая попытка сделать .NET платформой с открытым исходным кодом была предпринята компанией Ximian.
Когда CLI и C# были ратифицированы ECMA в 2001 г. и ISO в 2003 г., это дало возможность
возможность самостоятельной реализации.
В 2001 году был запущен проект с открытым исходным кодом Mono, направленный на внедрение .NET Framework на
Программное обеспечение Linux для настольных ПК.
Поскольку .NET Framework в то время была проприетарной технологией, .NET Framework и Mono
их собственный компилятор, BCL и среда выполнения.
Со временем Microsoft перешла к открытому исходному коду, и исходный код .NET стал открытым. 
Проект Mono перенял некоторый исходный код и инструменты из кодовой базы .NET.

В то же время проекты Mono также претерпели множество изменений. В то время, когда Моно был
принадлежащая компании Xamarin, Xamarin разработала платформу Xamarin на основе Mono для
поддерживать платформу .NET на Android, iOS, универсальной платформе Windows (UWP) и macOS. В
В 2016 году Microsoft приобрела Xamarin, ставшую кроссплатформенным решением в экосистеме .NET.

## .NET Core

Еще до приобретения Xamarin Microsoft уже начала работу над тем, чтобы сделать .NET кроссплатформенной.
рамки. Первой попыткой стал выпуск .NET Core 1.0 в 2016 году. .NET Core — это бесплатная и открытая
исходный фреймворк, доступный для Windows, Linux и macOS. Его можно использовать для создания современных веб-сайтов.
приложения, микросервисы, библиотеки и консольные приложения. Поскольку приложения .NET Core могут работать на
Linux мы можем создавать микросервисы, используя контейнеры и облачную инфраструктуру.
После выпуска .NET Core 3.x Microsoft работала над интеграцией и унификацией технологии .NET.
на различных платформах. Эта унифицированная версия должна была заменить как .NET Core, так и .NET Framework. К
во избежание путаницы с .NET Framework 4.x, эта унифицированная платформа была названа .NET 5. Поскольку .NET
5 общий BCL можно использовать на всех платформах. В .NET 5 по-прежнему есть две среды выполнения, которые
WinRT (используется для Windows) и среда выполнения Mono (используется для мобильных устройств и macOS).
В этой книге мы используем версию .NET 6.

## .NET Standard и переносимые библиотеки классов

До выпуска .NET 5 с .NET Framework, Mono и .NET Core у нас было другое подмножество
BCL на разных платформах. Для совместного использования кода между разными средами выполнения или платформами
была использована техника, называемая переносимыми библиотеками классов (PCL). При создании PCL необходимо
выберите комбинацию платформ, которые вы хотите поддерживать. Уровень совместимости
решили разработчики. Если вы хотите повторно использовать какой-либо PCL, вы должны внимательно изучить список платформ.
что можно поддержать.
Несмотря на то, что PCL обеспечивает возможность совместного использования кода, он не может хорошо решить проблемы совместимости. К
Чтобы преодолеть проблемы совместимости, Microsoft представила .NET Standard.
.NET Standard — это не отдельный выпуск .NET, а спецификация набора API-интерфейсов .NET, которые
должен поддерживаться большинством реализаций .NET (.NET Framework, Mono, .NET Core, .NET 5 или
6 и так далее).
После .NET 5 и более поздних версий доступна унифицированная BCL, но .NET Standard по-прежнему будет частью
этот единый BCL. Если ваши приложения должны поддерживать только .NET 5 или более позднюю версию, вам не нужно
слишком много заботятся о .NET Standard. Однако, если вы хотите быть совместимым со старыми версиями .NET,
.NET Standard по-прежнему лучший выбор для вас. В этой книге мы будем использовать .NET Standard 2.0 для построения
нашей модели данных, так как эта версия может поддерживать большинство существующих реализаций .NET и все
будущие выпуски .NET.
Новых версий .NET Standard от Microsoft не будет, но .NET 5, .NET 6 и все будущие
версии продолжат поддерживать .NET Standard 2.1 и более ранние версии. В Таблице 1.3 показаны платформы и
версии, которые может поддерживать .NET Standard 2.0, и это также совместимый список для нашей модели данных
в этой книге.

|Внедрение .NET|Поддержка версий|
|:------------------|:---------------|
|.NET и .NET Core |2.0, 2.1, 2.2, 3.0, 3.1, 5.0 и 6.0|
|.NET Framework 1|4.6.1 2, 4.6.2, 4.7, 4.7.1, 4.7.2 и 4.8|
|Моно|5.4 и 6.4|
|Xamarin.iOS|10.14 и 12.16|
|Xamarin.Mac|3.8 и 5.16|
|Xamarin.Android|8.0 и 10.0|
|UWP|10.0.16299, подлежит уточнению|
|Единство|2018.1|

Таблица 1.3. Реализации, совместимые с .NET Standard 2.0

Проект KPCLib с открытым исходным кодом представляет собой библиотеку .NET Standard 2.0, и мы будем использовать ее в нашем приложении. В
В таблице 1.3 видно, что библиотеки .NET Standard можно использовать как в приложениях Xamarin, так и в приложениях .NET MAUI.

## Использование Xamarin для мобильной разработки

Как мы упоминали в предыдущем разделе, Xamarin был частью проекта Mono и был попыткой
поддержка .NET на Android, iOS и macOS. Xamarin.Forms — это кроссплатформенная платформа пользовательского интерфейса от
Ксамарин. .NET MAUI — это эволюция Xamarin.Forms. Прежде чем мы обсудим .NET MAUI и Xamarin.
Forms, давайте рассмотрим следующую схему реализации Xamarin на различных платформах.

![изображение](https://user-images.githubusercontent.com/26972859/231535927-4e39cd8a-ae58-48ed-ab4b-4eae86d6b332.png)

Рисунок 1.1: Реализации Xamarin

На рис. 1.1 показана общая архитектура Xamarin. Xamarin позволяет разработчикам создавать собственные пользовательские интерфейсы
на каждой платформе и писать бизнес-логику на C#, которую можно использовать на разных платформах.

На поддерживаемых платформах Xamarin содержит привязки почти для всех пакетов SDK базовой платформы.
Xamarin также предоставляет средства для прямого вызова библиотек Objective-C, Java, C и C++.
давая вам возможность использовать широкий спектр стороннего кода. Вы можете использовать существующие Android, iOS или
Библиотеки macOS, написанные на Objective-C, Swift, Java или C/C++.
Среда выполнения Mono используется в качестве среды выполнения .NET на этих платформах. Имеет два режима работы –
Точно в срок (JIT) и с опережением времени (AOT). JIT-компиляция динамически генерирует код в том виде, в каком он есть.
казнен. В режиме компиляции AOT Mono предварительно компилирует все, поэтому его можно использовать в операционной системе.
системы, где динамическая генерация кода невозможна.
Как видно на рис. 1.1, JIT можно использовать на Android и macOS, а AOT — на iOS, где
динамическая генерация кода не допускается.
Существует два способа разработки собственных приложений с использованием Xamarin.
Вы можете разрабатывать собственные приложения так же, как разработчики Android, iOS или macOS, используя собственные API.
на каждой платформе. Разница в том, что вы используете библиотеки .NET и C# вместо специфичных для платформы
язык и библиотеки напрямую. Преимущество этого подхода в том, что вы можете использовать один язык и делиться
множество компонентов через .NET BCL, даже если вы работаете на разных платформах. Вы также можете
использовать возможности базовых платформ, таких как разработчики собственных приложений.
Если вы хотите повторно использовать код на уровне пользовательского интерфейса, вы можете использовать Xamarin.Forms вместо собственного пользовательского интерфейса.

## Xamarin.Формы

```Xamarin.Android```, ```Xamarin.iOS``` и ```Xamarin.Mac``` предоставляют среду .NET, предоставляющую почти
все исходные возможности SDK на соответствующих платформах. Например, как разработчик, вы
имеют почти те же возможности с Xamarin.Android, что и с исходным пакетом SDK для Android. К
для дальнейшего улучшения совместного использования кода была создана среда пользовательского интерфейса с открытым исходным кодом Xamarin.Forms. Ксамарин.
Forms включает набор кроссплатформенных компонентов пользовательского интерфейса. Дизайн пользовательского интерфейса
может быть реализован с использованием языка разметки XAML, похожего на пользовательский интерфейс Windows.
дизайн в WinUI или WPF.

## Xamarin.Essentials

Поскольку Xamarin предоставляет возможности пакетов SDK базовой платформы, вы можете получить доступ к функциям устройства.
с помощью .NET API. Однако реализация зависит от платформы. Например, когда вы используете
службы определения местоположения на Android или iOS, .NET API может быть другим. Для дальнейшего улучшения совместного использования кода
на разных платформах ```Xamarin.Essentials``` можно использовать для доступа к собственным функциям устройства. ```Xamarin.Essentials```
предоставляет унифицированный интерфейс .NET для встроенных функций устройства. Если вы используете ```Xamarin.Essentials``` вместо
собственные API, ваш код можно повторно использовать на разных платформах.

Некоторые примеры функций, предоставляемых ```Xamarin.Essentials```, включают следующее:

• Информация об устройстве

• Файловая система

• Акселерометр

• номеронабиратель телефона

• Текст в речь

• Блокировка экрана

Использование ```Xamarin.Forms``` вместе с ```Xamarin.Essentials```, большинство реализаций, включая бизнес
логика, дизайн пользовательского интерфейса и некоторый уровень специфичных для устройства функций могут быть общими для разных платформ.

## Сравнение дизайна пользовательского интерфейса на разных платформах

В большинстве современных приложений для различных платформ используется модель-представление-контроллер.
(MVC) шаблон проектирования. Чтобы разделить бизнес-логику и дизайн пользовательского интерфейса, существуют разные
подходы, используемые на Android, iOS/macOS и Windows. На всех задействованных платформах, хотя
используемые языки программирования разные, все они используют язык разметки на основе XML для проектирования
пользовательские интерфейсы.
На платформе iOS/macOS разработчики могут использовать ```Interface Builder``` в ```XCode``` для создания ```.storyboard```.
или файлы ```.xib```. Оба являются файлами сценариев на основе XML, которые используются для хранения информации о пользовательском интерфейсе, и этот сценарий
интерпретируется во время выполнения вместе с кодом Swift или Objective-C для создания пользовательского интерфейса. В 2019 году
Apple анонсировала новый фреймворк SwiftUI. Используя SwiftUI, разработчики могут создавать пользовательские интерфейсы, используя
язык Swift декларативным способом напрямую.
На платформе Android разработчики могут использовать редактор макетов в Android Studio для создания пользователя.
интерфейс графически и сохранить результат в файлах макета. Файлы макета также имеют формат XML.
и может быть загружен во время выполнения для создания пользовательского интерфейса.
На платформе Windows Extensible Application Markup Language (XAML) используется в пользовательских
дизайн интерфейса. XAML — это язык на основе XML, используемый для разработки пользовательского интерфейса в Windows.
Платформа. Для приложения WPF или UWP конструктор XAML можно использовать для разработки пользовательского интерфейса.
В .NET MAUI пользовательский интерфейс на основе XAML является пользовательским интерфейсом приложения по умолчанию. Другой шаблон, представление модели
Также можно использовать шаблон обновления (MVU). В шаблоне MVU пользовательский интерфейс реализован в
C# напрямую без XAML. Стиль кодирования MVU похож на SwiftUI.
Несмотря на то, что SwiftUI на платформах Apple или MVU в .NET MAUI можно использовать, классический пользовательский
Реализация интерфейса — это язык разметки на основе XML. Проведем сравнение в таблице 1.4.

|Платформа|IDE|Редактор|Язык|Расширение файла|
|:-------|:--|:-----|:-------|:-------------|
|Windows|Visual Studio|Конструктор XAML|XAML/C# |.xaml|
|iOS/macOS |Xcode|Конструктор интерфейсов|XML/Swift/Objective C|.layout|
|Android|Android Studio|Редактор макетов|XML/Java/Kotlin|.storyboard или .xib|
|.NET MAUI/Xamarin.Forms |Visual Studio|NA|XAML/C#|.xaml|
|.NET MAUI Blazor |Visual Studio|NA|Razor/C#|.razor|

Таблица 1.4: Сравнение дизайна пользовательского интерфейса

В таблице 1.4 мы видим сравнение дизайна пользовательского интерфейса на разных платформах.
.NET MAUI и Xamarin.Forms используют диалект XAML для разработки пользовательских интерфейсов на всех поддерживаемых платформах.
платформы. Для .NET MAUI у нас есть еще один вариант дизайна пользовательского интерфейса — Blazor. Мы
мы обсудим Blazor позже в этой главе.
В ```Xamarin.Forms``` мы создаем пользовательские интерфейсы на XAML и программный код на C#. лежащий в основе
реализация по-прежнему является собственными элементами управления на каждой платформе, поэтому внешний вид Xamarin.Forms
приложения такие же, как родные.

Некоторые примеры функций, предоставляемых ```Xamarin.Forms```, включают следующее:

* Язык пользовательского интерфейса XAML

* Привязка данных

* Жесты

* Последствия

* Стайлинг

Несмотря на то, что мы можем совместно использовать почти весь код пользовательского интерфейса с ```Xamarin.Forms```, нам все равно нужно обрабатывать большую часть
ресурсы, используемые приложением на каждой платформе в отдельности. Этими ресурсами могут быть изображения,
шрифты или строки. В структуре проекта ```Xamarin.Forms``` у нас есть общий стандартный проект .NET
и несколько проектов для конкретных платформ. Большая часть работы по развитию будет выполняться в общем
проект, но ресурсы по-прежнему обрабатываются в проектах для конкретной платформы отдельно

## Переход на .NET MAUI

Благодаря объединению ```.NET Xamarin``` стал частью платформы .NET, а ```Xamarin.Forms```
интегрируется с .NET в форме .NET MAUI.
.NET MAUI — это первоклассный гражданин .NET с пространством имен ```Microsoft.Maui```.

Переход на .NET MAUI также дает Microsoft возможность перепроектировать и перестроить Xamarin.
Формирует с нуля и решает некоторые проблемы, которые остаются на более низком уровне.
По сравнению с ```Xamarin.Forms```, .NET MAUI использует единую структуру проекта, лучше поддерживает горячую перезагрузку,
и поддерживает шаблоны разработки ```MVU``` и ```Blazor```.
На рис. 1.2 видно, что существует общий BCL для всех поддерживаемых операционных систем. Под
BCL существует две среды выполнения, WinRT и Mono Runtime, в зависимости от платформы. Для каждой платформы,
существует специальная реализация .NET, обеспечивающая полную поддержку разработки собственных приложений.

![изображение](https://user-images.githubusercontent.com/26972859/231538129-9f10d6e0-c39f-47d1-83a6-0fad8e868e21.png)

Рисунок 1.2: Архитектура .NET MAUI

По сравнению с ```Xamarin.Forms```, как видно из таблицы 1.5, в .NET MAUI есть много улучшений.
.NET MAUI использует единую структуру проекта для упрощения управления проектами. Мы можем управлять ресурсами,
внедрение зависимостей и конфигурации в одном месте вместо того, чтобы управлять ими по отдельности
на платформу.
.NET MAUI полностью интегрирован как часть .NET, поэтому мы можем создавать и создавать проекты, используя .NET.
Командная строка SDK. В этом случае у нас больше возможностей для выбора среды разработки.

| |.NET MAUI|Xamarin.Forms|
|:---------|:--------|:------------|
|Структура проекта|Один проект|Несколько проектов|
|Управление ресурсами|Одно место для всех платформ |Управление для каждой платформы|
|Полная интеграция с .NET| Пространство имен в Microsoft.Maui и других IDE можно выбрать помимо Visual Studio. Поддержка командной строки. Мы можем создавать, собирать и запускать в консоли: dotnet new maui, dotnet build -t:Run -f net6.0-android, dotnet build -t:Run -f net6.0-ios, dotnet build -t:Run -f net6.0-maccatalyst|Пространство имен в Xamarin.Forms и использует Visual Studio в качестве IDE |
|Улучшение дизайна|1. Конфигурация через .NET Generic Host 2. Поддержка внедрения зависимостей|Конфигурация разбросана по разным местам|
|Шаблон MVU|Современный тип реализации пользовательского интерфейса|Нет|
|Blazor Hybrid|Поддержка через BlazorWebView|Нет|

Табл. 1.5: Улучшение .NET MAUI

В таблице 1.5 мы видим, что .NET MAUI поддерживает настройку приложения с использованием универсального хоста .NET,
может работать с несколькими средами IDE, поддерживает внедрение зависимостей и может использовать MVVM
набор инструментов и т. д. Он также поддерживает шаблон MVU и гибридный пользовательский интерфейс Blazor. Далее мы рассмотрим Blazor
Гибридное приложение.

## Приложения .NET MAUI Blazor

В таблице 1.4, где мы сравнивали варианты дизайна пользовательского интерфейса на разных платформах, мы упомянули
что есть еще один способ разработки кроссплатформенных пользовательских интерфейсов в .NET MAUI — это ```Blazor```.
```Blazor```, выпущенный в ASP.NET Core 3.0, представляет собой платформу для создания интерактивного веб-интерфейса на стороне клиента с
.NET. С помощью ```.NET MAUI``` и ```Blazor``` мы можем создавать кроссплатформенные приложения в форме ```Blazor Hybrid```.
Программы. Таким образом, граница между собственным приложением и веб-приложением становится размытой.
Приложения ```.NET MAUI Blazor Hybrid``` позволяют интегрировать компоненты ```Blazor``` с собственной платформой.
функции и элементы управления пользовательского интерфейса. Компоненты ```Blazor``` имеют полный доступ к собственным возможностям устройства.
Способ использования веб-инфраструктуры ```Blazor``` в .NET MAUI — через компонент ```BlazorWebView```.
```.NET MAUI Blazor``` позволяет использовать как собственные, так и веб-интерфейсы в одном приложении, и они могут сосуществовать в одном приложении.
один вид. С ```.NET MAUI Blazor``` приложения могут использовать компонентную модель Blazor (Razor компоненты), который использует HTML, CSS и синтаксис Razor. Часть Blazor приложения может повторно использоваться
компоненты, макеты и стили, которые используются в существующем обычном веб-приложении. ```BlazorWebView``` может быть составленным вместе с нативными элементами; кроме того, они используют функции платформы и обмениваются состояниями со своими родными аналогами.

## Выбор XAML вместо Razor в .NET MAUI

Для разработки пользовательского интерфейса приложения .NET MAUI у вас есть несколько вариантов реализации:
• XAML: реализация пользовательского интерфейса на XAML, который похож только на ```Xamarin.Forms```. Мы также можем
выберите шаблон ```MVU```, чтобы использовать код C# для непосредственного создания и оформления элементов пользовательского интерфейса. Независимо от того
Независимо от того, выбираете ли вы код XAML или C# напрямую, базовая реализация остается неизменной.
• ```Blazor```: реализация пользовательского интерфейса в Razor Pages, аналогичного разработке веб-приложений.
• Гибридное приложение ```Blazor```: используйте в своем приложении как XAML, так и Razor Pages.
Это ваше решение, как вы хотите спроектировать свое приложение. Вы можете выбрать один из предыдущих вариантов или комбинируйте XAML и пользовательский интерфейс ```Blazor``` в соответствии с наиболее подходящим вариантом. Для разработки приложений ```Blazor Hybrid``` вам
должны иметь возможность напрямую использовать большинство существующих библиотек ```Blazor```. ```Blazor``` предоставляет хороший JavaScript
интероперабельность, и вы можете использовать свою любимую библиотеку JavaScript в своей разработке.

## Настройка среды разработки

И Windows, и macOS можно использовать для разработки .NET MAUI, но вы не сможете создавать
все цели только с одной из них. Для создания всех целей вам понадобятся компьютеры Windows и Mac.
В этой книге среда Windows используется для создания и тестирования целей Android и Windows. iOS
и цели macOS созданы на компьютере Mac.
Приложение .NET MAUI может быть ориентировано на следующие платформы:
• Android 5.0 (API 21) или выше
• iOS 10 или выше
• macOS 10.13 или более поздней версии с использованием Mac Catalyst
• Windows 11 и Windows 10 версии 1809 или выше с использованием библиотеки пользовательского интерфейса Windows (WinUI) 3.
Приложения .NET MAUI Blazor используют элемент управления WebView для конкретной платформы, поэтому они имеют следующие
дополнительные требования:
• Android 7.0 (API 24) или выше
• iOS 14 или выше
• macOS 11 или более поздней версии с использованием Mac Catalyst
Целевые объекты сборки .NET MAUI для Android, iOS, macOS и Windows можно создавать с помощью Visual Studio.
на компьютере с Windows. В этой среде для сборки iOS и macOS требуется сетевой Mac.
цели. Xcode должен быть установлен на сопряженном Mac для отладки и тестирования приложения iOS MAUI в Windows.
среда разработки.

Цели .NET MAUI для Android, iOS и macOS можно создавать и тестировать на macOS.

|Целевая платформа|Windows|macOS|
|:---------|:-------|:-------|
|Windows|Да|Нет|
|Android|Да|Да|
|iOS|Да (сопряжение с Mac)|Да|
|macOS|Только сборка (сопряжение с Mac)|Да|

Таблица 1.6: Среда разработки .NET MAUI

Пожалуйста, обратитесь к Таблице 1.6, чтобы узнать о конфигурациях сборки для Windows и macOS.

# Установка .NET MAUI в Windows

.NET MAUI можно установить как часть Visual Studio 2022. Редакция Visual Studio Community бесплатна,
и мы можем загрузить его с веб-сайта Microsoft по адресу https://visualstudio.microsoft.
com/vs/community/.8
После запуска установщика Visual Studio мы увидим экран, аналогичный показанному на рис. 1.3.
Пожалуйста, выберите .NET Multi-platform App UI development и .NET desktop development в списке.
вариантов. Нам также нужно выбрать ASP.NET и веб-разработку для приложения .NET MAUI Blazor,
которые будут рассмотрены во второй части этой книги.

![изображение](https://user-images.githubusercontent.com/26972859/231541579-2fcedff7-54c6-444f-aa94-39c5c5d05f31.png)

Рисунок 1.3: Установка Visual Studio 2022

После завершения установки мы можем проверить установку из командной строки с помощью команды
следующая команда dotnet:

```
C:\>dotnet workload list
Installed Workload Ids Manifest Version Installation Source
--------------------------------------------------------------
------
maui-windows 6.0.486/6.0.400 VS 17.3.32811.315
maui-maccatalyst 6.0.486/6.0.400 VS 17.3.32811.315
maccatalyst 15.4.446-ci.-release-6-0-
4xx.446/6.0.400 VS 17.3.32811.315
maui-ios 6.0.486/6.0.400 VS 17.3.32811.315
ios 15.4.446-ci.-release-6-0-
4xx.446/6.0.400 VS 17.3.32811.315
maui-android 6.0.486/6.0.400 VS 17.3.32811.315
android 32.0.448/6.0.400 VS 17.3.32811.315
Use `dotnet workload search` to find additional workloads to
install.
```
Мы готовы создать, собрать и запустить приложение .NET MAUI в Windows.

# Установка .NET MAUI на macOS

Установка выпуска Visual Studio Community аналогична тому, что мы делали в Windows.
Инсталляционный пакет можно скачать по той же ссылке.

![изображение](https://user-images.githubusercontent.com/26972859/231541800-7dc6c71a-8b14-4b90-b349-054ab535d6af.png)

Рисунок 1.4: Установка Visual Studio для Mac 2022

Выберите .NET и .NET MAUI из списка опций на рис. 1.4.
После завершения установки мы можем проверить установку из командной строки с помощью команды
следующая команда dotnet:

```
% dotnet workload list
Installed Workload Ids Manifest Version
Installation Source
--------------------------------------------------------------
------
wasm-tools 6.0.9/6.0.400 SDK 6.0.400
macos 12.3.453/6.0.400 SDK 6.0.400
maui-maccatalyst 6.0.536/6.0.400 SDK 6.0.400
maui-ios 6.0.536/6.0.400 SDK 6.0.400
maui-android 6.0.536/6.0.400 SDK 6.0.400
ios maccatalyst 15.4.453/6.0.400 SDK 6.0.400
maui 6.0.536/6.0.400 SDK 6.0.400
tvos 15.4.453/6.0.400 SDK 6.0.400
android 32.0.465/6.0.400 SDK 6.0.400
Use `dotnet workload search` to find additional workloads to
install.
```
Мы готовы создать, собрать и запустить приложение .NET MAUI на macOS.

## Что вы узнаете из этой книги

В этой книге вы узнаете, как разрабатывать кроссплатформенные приложения с использованием .NET MAUI. 
следующие темы, затронутые в этой книге:
* Экосистема .NET и .NET MAUI
* Дизайн пользовательского интерфейса с использованием XAML
* Привязка данных с использованием шаблона проектирования MVVM
* Навигация в оболочке .NET MAUI и навигация по дизайну с использованием маршрутов
* Внедрение зависимости
* Изучение ```Blazor``` для разработки пользовательского интерфейса с помощью приложения ```.NET MAUI Blazor Hybrid```.
* Использование ```xUnit.net``` для написания сценариев модульного тестирования для классов .NET и bUnit для реализации теста.
чехлы для Razor Pages
* Публикация приложения в Google Play, Apple Store и Microsoft Store.

# Приложение, которое мы будем создавать в этой книге

На протяжении всей книги мы будем изучать программирование .NET MAUI, создавая менеджер паролей.
приложение. KeePass — это менеджер паролей с открытым исходным кодом, которым пользуются многие люди. Тем не менее, это приложение
создан для .NET Framework, поэтому он может работать только в Windows. В KeePass есть библиотека KeePassLib, которая
реализует большую часть логики управления зашифрованной базой данных. Это популярный формат базы данных.
для управления паролями. Например, IntelliJ IDEA использует базу данных KeePass для хранения паролей.
используется на этапах разработки.
Чтобы сделать KeePassLib кроссплатформенной библиотекой, я портировал KeePassLib на .NET Standard 2.0 как
проект KPCLib с открытым исходным кодом. Исходный код можно найти на https://github.com/
passxyz/KPCLib.
Я опубликовал приложение PassXYZ.Vault, разработанное с использованием Xamarin.Forms и KPCLib, в магазинах приложений.
В этой книге мы вместе перепишем PassXYZ.Vault, используя .NET MAUI. Вы можете узнать о
кросс-платформенное программирование посредством прогрессивной разработки этого приложения, пока оно не будет опубликовано
в магазинах приложений.

# Краткое содержание

В этой главе мы начали с обзора кроссплатформенных технологий. Мы сравнили .NET
решение с другими кросс-платформенными технологиями. После этого мы прошлись по ландшафту .NET.
Я объяснил связь между .NET Framework, Mono и .NET Core. Затем мы обсудили
Xamarin и .NET MAUI. Мы рассмотрели разницу между Xamarin.Forms и .NET MAUI.
Одной из важных особенностей .NET MAUI является то, что мы можем использовать Blazor вместе с пользовательским интерфейсом XAML.
дизайн. Затем у нас был обзор .NET MAUI Blazor. Наконец, мы настроили среду разработки
для остальных глав.
В следующей главе мы рассмотрим, как создать приложение .NET MAUI с нуля.

# Дальнейшее чтение

* .NET MAUI: Дополнительную информацию о .NET MAUI можно найти на официальном сайте Microsoft.
документация: https://docs.microsoft.com/en-us/dotnet/maui/
* KeePass: официальный сайт KeePass можно найти по адресу https://keepass.info/
